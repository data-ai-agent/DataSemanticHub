# 执行菜单图标字段迁移

## 迁移文件
`migrations/system/add_icon_to_menus.sql`

## 执行方式

### 方式一：使用 MySQL 命令行

```bash
# 连接到数据库（根据实际情况调整参数）
mysql -h localhost -P 3306 -u root -p DataSemanticHub < migrations/system/add_icon_to_menus.sql

# 或者如果使用环境变量中的密码
mysql -h ${DB_HOST:-localhost} -P ${DB_PORT:-3306} -u ${DB_USER:-root} -p${DB_PASSWORD} ${DB_NAME:-DataSemanticHub} < migrations/system/add_icon_to_menus.sql
```

### 方式二：在 MySQL 客户端中执行

1. 连接到数据库：
```bash
mysql -h localhost -P 3306 -u root -p DataSemanticHub
```

2. 执行 SQL：
```sql
ALTER TABLE `menus` 
ADD COLUMN `icon` VARCHAR(64) NULL DEFAULT NULL COMMENT '图标名称（如 Layout, Database）' 
AFTER `permission_key`;
```

### 方式三：通过 Docker 执行（如果使用 Docker Compose）

```bash
# 如果数据库在 Docker 容器中
docker exec -i system-service-mysql mysql -uroot -p${DB_PASSWORD} DataSemanticHub < migrations/system/add_icon_to_menus.sql
```

### 方式四：使用数据库管理工具

使用 Navicat、DBeaver、MySQL Workbench 等工具：
1. 连接到数据库
2. 打开迁移文件 `migrations/system/add_icon_to_menus.sql`
3. 执行 SQL 语句

## 验证迁移

执行后，可以通过以下 SQL 验证字段是否添加成功：

```sql
-- 查看表结构
DESC menus;

-- 或者
SHOW COLUMNS FROM menus LIKE 'icon';

-- 应该能看到 icon 字段，类型为 VARCHAR(64)，允许 NULL
```

## 回滚（如果需要）

如果需要回滚，执行：

```sql
ALTER TABLE `menus` DROP COLUMN `icon`;
```

## 注意事项

1. **备份数据**：执行迁移前建议备份数据库
2. **字段位置**：字段会添加在 `permission_key` 字段之后
3. **兼容性**：该字段允许 NULL，不会影响现有数据
4. **执行时机**：建议在低峰期执行，避免影响业务
