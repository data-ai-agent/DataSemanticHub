## æ™ºèƒ½ä½“å·¥å‚ - æ•´ä½“æ¶æ„æ–¹æ¡ˆ

### æ ¸å¿ƒç›®æ ‡
æ„å»ºä¸€ä¸ªä¼ä¸šçº§çš„AIèƒ½åŠ›ç®¡ç†å¹³å°ï¼Œæ”¯æŒæç¤ºè¯å·¥ç¨‹åŒ–ã€å¤šæ¨¡å‹ç»Ÿä¸€ç®¡ç†ã€ä»¥åŠçµæ´»çš„æ™ºèƒ½ä½“ç¼–æ’èƒ½åŠ›ã€‚

---

## ä¸€ã€åŠŸèƒ½æ¨¡å—è§„åˆ’

### 1. æç¤ºè¯ç®¡ç†ä¸­å¿ƒ (Prompt Hub)

#### æ ¸å¿ƒåŠŸèƒ½
```
ğŸ“š æç¤ºè¯åº“
â”œâ”€â”€ æç¤ºè¯æ¨¡æ¿ç®¡ç†
â”‚   â”œâ”€â”€ æ¨¡æ¿åˆ›å»º/ç¼–è¾‘/åˆ é™¤
â”‚   â”œâ”€â”€ å˜é‡æ§½ä½å®šä¹‰ ({{variable}})
â”‚   â”œâ”€â”€ æ¨¡æ¿åˆ†ç±»ï¼ˆç³»ç»Ÿçº§/ä¸šåŠ¡çº§/ä¸ªäººï¼‰
â”‚   â””â”€â”€ æ¨¡æ¿æ ‡ç­¾ä½“ç³»
â”‚
â”œâ”€â”€ ç‰ˆæœ¬æ§åˆ¶
â”‚   â”œâ”€â”€ Git-styleç‰ˆæœ¬ç®¡ç†
â”‚   â”œâ”€â”€ ç‰ˆæœ¬å¯¹æ¯”
â”‚   â”œâ”€â”€ å›æ»šæœºåˆ¶
â”‚   â””â”€â”€ å˜æ›´æ—¥å¿—
â”‚
â”œâ”€â”€ åœ¨çº¿æµ‹è¯•å°
â”‚   â”œâ”€â”€ å®æ—¶é¢„è§ˆæ¸²æŸ“ç»“æœ
â”‚   â”œâ”€â”€ å¤šæ¨¡å‹å¯¹æ¯”æµ‹è¯•
â”‚   â”œâ”€â”€ æ•ˆæœè¯„åˆ†ç³»ç»Ÿ
â”‚   â””â”€â”€ æµ‹è¯•ç”¨ä¾‹ç®¡ç†
â”‚
â””â”€â”€ ä½¿ç”¨åˆ†æ
    â”œâ”€â”€ è°ƒç”¨ç»Ÿè®¡
    â”œâ”€â”€ æ•ˆæœè¿½è¸ª
    â”œâ”€â”€ æˆæœ¬åˆ†æ
    â””â”€â”€ ä¼˜åŒ–å»ºè®®
```

#### æ•°æ®æ¨¡å‹ï¼ˆå‚è€ƒï¼‰
```typescript
interface PromptTemplate {
  id: string;
  name: string;
  code: string; // å”¯ä¸€æ ‡è¯†
  content: string; // æ¨¡æ¿å†…å®¹
  variables: PromptVariable[]; // å˜é‡å®šä¹‰
  category: 'system' | 'business' | 'personal';
  tags: string[];
  version: number;
  status: 'draft' | 'published' | 'archived';
  metadata: {
    model_suggestions?: string[]; // æ¨èä½¿ç”¨çš„æ¨¡å‹
    max_tokens?: number;
    temperature?: number;
  };
  usage_stats: {
    call_count: number;
    avg_cost: number;
    avg_latency: number;
  };
}
```

---

### 2. å¤§æ¨¡å‹ç®¡ç†ä¸­å¿ƒ (LLM Hub)

#### æ ¸å¿ƒåŠŸèƒ½
```
ğŸ¤– æ¨¡å‹ç®¡ç†
â”œâ”€â”€ ä¾›åº”å•†é…ç½®
â”‚   â”œâ”€â”€ OpenAI (GPT-3.5/4/4o)
â”‚   â”œâ”€â”€ Anthropic (Claude)
â”‚   â”œâ”€â”€ å›½å†…æ¨¡å‹ï¼ˆæ–‡å¿ƒ/é€šä¹‰/æ™ºè°±/è±†åŒ…ç­‰ï¼‰
â”‚   â”œâ”€â”€ ç§æœ‰åŒ–éƒ¨ç½²æ¨¡å‹
â”‚   â””â”€â”€ è‡ªå®šä¹‰æ¥å…¥
â”‚
â”œâ”€â”€ å‡­è¯ç®¡ç†
â”‚   â”œâ”€â”€ API Keyå®‰å…¨å­˜å‚¨
â”‚   â”œâ”€â”€ å¯†é’¥è½®æ¢ç­–ç•¥
â”‚   â”œâ”€â”€ ä½¿ç”¨é¢åº¦ç®¡ç†
â”‚   â””â”€â”€ æƒé™æ§åˆ¶
â”‚
â”œâ”€â”€ æ¨¡å‹é…ç½®
â”‚   â”œâ”€â”€ å‚æ•°æ¨¡æ¿ï¼ˆtemperature, top_pç­‰ï¼‰
â”‚   â”œâ”€â”€ èƒ½åŠ›æ ‡æ³¨ï¼ˆæ–‡æœ¬/ä»£ç /å¤šæ¨¡æ€ï¼‰
â”‚   â”œâ”€â”€ æˆæœ¬é…ç½®ï¼ˆtokenä»·æ ¼ï¼‰
â”‚   â””â”€â”€ é™æµç­–ç•¥
â”‚
â”œâ”€â”€ ç›‘æ§é¢æ¿
â”‚   â”œâ”€â”€ è°ƒç”¨é‡ç»Ÿè®¡
â”‚   â”œâ”€â”€ å“åº”æ—¶é—´åˆ†å¸ƒ
â”‚   â”œâ”€â”€ é”™è¯¯ç‡ç›‘æ§
â”‚   â”œâ”€â”€ æˆæœ¬å®æ—¶è¿½è¸ª
â”‚   â””â”€â”€ é…é¢é¢„è­¦
â”‚
â””â”€â”€ æ™ºèƒ½è·¯ç”±
    â”œâ”€â”€ è´Ÿè½½å‡è¡¡
    â”œâ”€â”€ é™çº§ç­–ç•¥
    â”œâ”€â”€ æˆæœ¬ä¼˜åŒ–è·¯ç”±
    â””â”€â”€ A/Bæµ‹è¯•æ”¯æŒ
```

#### æ•°æ®æ¨¡å‹ï¼ˆå‚è€ƒï¼‰
```typescript
interface LLMProvider {
  id: string;
  name: string;
  type: 'openai' | 'anthropic' | 'custom';
  endpoint: string;
  api_key_encrypted: string;
  models: LLMModel[];
  status: 'active' | 'inactive';
  rate_limit: {
    rpm: number; // requests per minute
    tpm: number; // tokens per minute
  };
}

interface LLMModel {
  id: string;
  provider_id: string;
  model_name: string; // gpt-4-turbo
  display_name: string;
  capabilities: ('text' | 'code' | 'image' | 'function_calling')[];
  pricing: {
    input_per_1k_tokens: number;
    output_per_1k_tokens: number;
  };
  context_window: number;
  default_params: ModelParams;
}
```

---

### 3. AIç¼–æ’å¼•æ“ (Agent Orchestrator)

#### æ ¸å¿ƒåŠŸèƒ½
```
ğŸ”§ æ™ºèƒ½ä½“ç¼–æ’
â”œâ”€â”€ Agentå®šä¹‰
â”‚   â”œâ”€â”€ Agentæ¨¡æ¿åº“
â”‚   â”œâ”€â”€ è§’è‰²è®¾å®šï¼ˆSystem Promptï¼‰
â”‚   â”œâ”€â”€ å·¥å…·é›†é…ç½®
â”‚   â”œâ”€â”€ çŸ¥è¯†åº“ç»‘å®š
â”‚   â””â”€â”€ è¡Œä¸ºçº¦æŸ
â”‚
â”œâ”€â”€ å·¥ä½œæµè®¾è®¡å™¨ (å¯è§†åŒ–)
â”‚   â”œâ”€â”€ æ‹–æ‹½å¼æµç¨‹ç¼–æ’
â”‚   â”œâ”€â”€ èŠ‚ç‚¹ç±»å‹
â”‚   â”‚   â”œâ”€â”€ LLMèŠ‚ç‚¹ï¼ˆå•æ¬¡è°ƒç”¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ æ¡ä»¶åˆ†æ”¯
â”‚   â”‚   â”œâ”€â”€ å¾ªç¯èŠ‚ç‚¹
â”‚   â”‚   â”œâ”€â”€ å·¥å…·è°ƒç”¨ï¼ˆFunction Callingï¼‰
â”‚   â”‚   â”œâ”€â”€ æ•°æ®è½¬æ¢
â”‚   â”‚   â””â”€â”€ äººå·¥å®¡æ ¸
â”‚   â”œâ”€â”€ å˜é‡ä¼ é€’
â”‚   â””â”€â”€ é”™è¯¯å¤„ç†
â”‚
â”œâ”€â”€ æ‰§è¡Œå¼•æ“
â”‚   â”œâ”€â”€ å¼‚æ­¥ä»»åŠ¡è°ƒåº¦
â”‚   â”œâ”€â”€ ä¸Šä¸‹æ–‡ç®¡ç†ï¼ˆä¼šè¯çŠ¶æ€ï¼‰
â”‚   â”œâ”€â”€ ä¸­é—´ç»“æœç¼“å­˜
â”‚   â”œâ”€â”€ æµå¼è¾“å‡ºæ”¯æŒ
â”‚   â””â”€â”€ å¹¶è¡Œæ‰§è¡Œä¼˜åŒ–
â”‚
â”œâ”€â”€ å·¥å…·å¸‚åœº
â”‚   â”œâ”€â”€ å†…ç½®å·¥å…·ï¼ˆæœç´¢/è®¡ç®—/æ•°æ®åº“æŸ¥è¯¢ï¼‰
â”‚   â”œâ”€â”€ è‡ªå®šä¹‰å·¥å…·æ³¨å†Œ
â”‚   â”œâ”€â”€ APIå°è£…å·¥å…·
â”‚   â””â”€â”€ å·¥å…·ç»„åˆ
â”‚
â””â”€â”€ è¿è¡Œç›‘æ§
    â”œâ”€â”€ å®æ—¶æ—¥å¿—æµ
    â”œâ”€â”€ èŠ‚ç‚¹æ‰§è¡Œè¿½è¸ª
    â”œâ”€â”€ æ€§èƒ½åˆ†æ
    â””â”€â”€ å¼‚å¸¸å‘Šè­¦
```

#### æ•°æ®æ¨¡å‹ï¼ˆå‚è€ƒï¼‰
```typescript
interface Agent {
  id: string;
  name: string;
  description: string;
  system_prompt_id: string; // å…³è”æç¤ºè¯
  model_id: string; // å…³è”å¤§æ¨¡å‹
  tools: string[]; // å¯ç”¨å·¥å…·IDåˆ—è¡¨
  knowledge_base_ids?: string[]; // RAGçŸ¥è¯†åº“
  workflow_definition?: WorkflowGraph; // ç¼–æ’å›¾
  config: {
    max_iterations?: number;
    timeout_seconds?: number;
    streaming?: boolean;
  };
}

interface WorkflowGraph {
  nodes: WorkflowNode[];
  edges: WorkflowEdge[];
  variables: { [key: string]: any };
}

interface WorkflowNode {
  id: string;
  type: 'llm' | 'condition' | 'tool' | 'transform' | 'human';
  config: any;
  position: { x: number; y: number };
}
```

---

## äºŒã€å‰ç«¯é¡µé¢ç»“æ„

### å»ºè®®çš„èœå•ç»“æ„
```
ğŸ­ æ™ºèƒ½ä½“å·¥å‚
â”œâ”€â”€ ğŸ“ æç¤ºè¯ç®¡ç†
â”‚   â”œâ”€â”€ æ¨¡æ¿åº“ (åˆ—è¡¨ + ç¼–è¾‘å™¨)
â”‚   â”œâ”€â”€ æµ‹è¯•å° (Playground)
â”‚   â””â”€â”€ ä½¿ç”¨ç»Ÿè®¡
â”‚
â”œâ”€â”€ ğŸ¤– æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ ä¾›åº”å•†é…ç½®
â”‚   â”œâ”€â”€ æ¨¡å‹åˆ—è¡¨
â”‚   â”œâ”€â”€ ç›‘æ§é¢æ¿
â”‚   â””â”€â”€ æˆæœ¬åˆ†æ
â”‚
â”œâ”€â”€ ğŸ”§ æ™ºèƒ½ä½“ç¼–æ’
â”‚   â”œâ”€â”€ Agentåˆ—è¡¨
â”‚   â”œâ”€â”€ å·¥ä½œæµè®¾è®¡å™¨ (Canvas)
â”‚   â”œâ”€â”€ å·¥å…·å¸‚åœº
â”‚   â””â”€â”€ æ‰§è¡Œå†å²
â”‚
â””â”€â”€ ğŸ“Š è¿è¡Œä¸­å¿ƒ
    â”œâ”€â”€ ä»»åŠ¡é˜Ÿåˆ—
    â”œâ”€â”€ å®æ—¶æ—¥å¿—
    â””â”€â”€ æ€§èƒ½çœ‹æ¿
```

---

## ä¸‰ã€æŠ€æœ¯å®ç°å»ºè®®

### åç«¯æœåŠ¡æ¶æ„
```
backend/services/
â”œâ”€â”€ ai-factory/          # AIå·¥å‚æœåŠ¡
â”‚   â”œâ”€â”€ cmd/
â”‚   â”‚   â””â”€â”€ server/
â”‚   â”œâ”€â”€ internal/
â”‚   â”‚   â”œâ”€â”€ handler/     # HTTPå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ logic/       # ä¸šåŠ¡é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ svc/         # æœåŠ¡ä¸Šä¸‹æ–‡
â”‚   â”‚   â”œâ”€â”€ model/       # æ•°æ®æ¨¡å‹
â”‚   â”‚   â””â”€â”€ types/       # ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ ai/              # AIæ ¸å¿ƒæ¨¡å—
â”‚       â”œâ”€â”€ prompt/      # æç¤ºè¯å¼•æ“
â”‚       â”œâ”€â”€ llm/         # LLMå®¢æˆ·ç«¯å°è£…
â”‚       â””â”€â”€ orchestrator/# ç¼–æ’å¼•æ“
â””â”€â”€ ...
```

### å‰ç«¯é¡µé¢è·¯å¾„
```
frontend/src/views/
â”œâ”€â”€ ai-factory/
â”‚   â”œâ”€â”€ PromptManagementView.tsx      # æç¤ºè¯ç®¡ç†
â”‚   â”œâ”€â”€ PromptEditorView.tsx          # æç¤ºè¯ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ PromptPlaygroundView.tsx      # æµ‹è¯•å°
â”‚   â”œâ”€â”€ LLMManagementView.tsx         # æ¨¡å‹ç®¡ç†
â”‚   â”œâ”€â”€ LLMMonitoringView.tsx         # ç›‘æ§é¢æ¿
â”‚   â”œâ”€â”€ AgentListView.tsx             # Agentåˆ—è¡¨
â”‚   â”œâ”€â”€ AgentOrchestratorView.tsx     # å·¥ä½œæµè®¾è®¡å™¨
â”‚   â”œâ”€â”€ ToolMarketView.tsx            # å·¥å…·å¸‚åœº
â”‚   â””â”€â”€ ExecutionCenterView.tsx       # è¿è¡Œä¸­å¿ƒ
```

---

## å››ã€å…³é”®æŠ€æœ¯é€‰å‹

### å‰ç«¯
- **ç¼–æ’è®¾è®¡å™¨**: React Flow / X6 (æ”¯ä»˜å®)
- **ä»£ç ç¼–è¾‘å™¨**: Monaco Editor (VS Codeå†…æ ¸)
- **Markdownæ¸²æŸ“**: ReactMarkdown
- **å›¾è¡¨**: ECharts / Recharts

### åç«¯
- **LLM SDK**:
  - OpenAI Go SDK
  - è‡ªç ”ç»Ÿä¸€é€‚é…å±‚ï¼ˆæ”¯æŒå¤šå‚å•†ï¼‰
- **å·¥ä½œæµå¼•æ“**:
  - Temporal (åˆ†å¸ƒå¼å·¥ä½œæµ)
  - æˆ–è‡ªç ”DAGæ‰§è¡Œå¼•æ“
- **æ¶ˆæ¯é˜Ÿåˆ—**: Kafka (å¼‚æ­¥ä»»åŠ¡)
- **ç¼“å­˜**: Redis (ä¸Šä¸‹æ–‡/ä¸­é—´ç»“æœ)

---

## äº”ã€å®æ–½è·¯çº¿å›¾

### Phase 1: MVP (2-3å‘¨)
- âœ… æç¤ºè¯CRUD
- âœ… åŸºç¡€æ¨¡å‹é…ç½®
- âœ… ç®€å•çš„å•æ­¥LLMè°ƒç”¨
- âœ… æ‰§è¡Œæ—¥å¿—æŸ¥çœ‹

### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (3-4å‘¨)
- âœ… æç¤ºè¯ç‰ˆæœ¬ç®¡ç†
- âœ… å¤šæ¨¡å‹æ”¯æŒ + æ™ºèƒ½è·¯ç”±
- âœ… åŸºç¡€ç¼–æ’ï¼ˆé¡ºåº/æ¡ä»¶/å¾ªç¯ï¼‰
- âœ… å·¥å…·æ³¨å†Œä¸è°ƒç”¨

### Phase 3: é«˜çº§ç‰¹æ€§ (4-5å‘¨)
- âœ… å¯è§†åŒ–å·¥ä½œæµè®¾è®¡å™¨
- âœ… RAGçŸ¥è¯†åº“é›†æˆ
- âœ… æµå¼è¾“å‡ºæ”¯æŒ
- âœ… æ€§èƒ½ç›‘æ§ä¸ä¼˜åŒ–

### Phase 4: ä¼ä¸šç‰¹æ€§ (æŒç»­)
- âœ… æƒé™ç®¡ç†
- âœ… å®¡è®¡æ—¥å¿—
- âœ… æˆæœ¬ç®¡æ§
- âœ… ç§æœ‰åŒ–éƒ¨ç½²æ”¯æŒ

---

## å…­ã€ä¸ç°æœ‰ç³»ç»Ÿé›†æˆ

### ä¸šåŠ¡åœºæ™¯ç¤ºä¾‹
1. **è¯­ä¹‰ç†è§£å¢å¼º**: ä½¿ç”¨Agentè‡ªåŠ¨ä¸ºæ•°æ®è¡¨ç”Ÿæˆä¸šåŠ¡åç§°å’Œæè¿°
2. **æ™ºèƒ½é—®æ•°**: ç¼–æ’Chainå®ç°è‡ªç„¶è¯­è¨€æŸ¥è¯¢è½¬SQL
3. **æ•°æ®è´¨é‡æ£€æŸ¥**: Agentè‡ªåŠ¨å·¡æ£€æ•°æ®è´¨é‡é—®é¢˜
4. **çŸ¥è¯†å›¾è°±æ„å»º**: ä½¿ç”¨LLMæå–å®ä½“å…³ç³»
