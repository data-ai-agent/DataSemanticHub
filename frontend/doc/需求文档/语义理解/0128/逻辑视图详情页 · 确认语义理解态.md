# 逻辑视图详情页 · 确认语义理解态

## Figma 组件级信息结构（Final）

> 页面类型：Logical View Detail
> 页面状态：**语义建模进行中（待确认）**

---

## 一、整体 Frame 结构（确认态）

```text
Frame: LogicalView_Detail_ConfirmSemantic

├─ ContextHeader
├─ SemanticStageBar   ← 状态 + 确认 CTA（新增核心）
├─ BusinessObjectUnderstanding
├─ ViewTabs
│   ├─ 字段结构
│   ├─ 对象关系
│   ├─ 质量概览
│   ├─ 安全合规
│   └─ 日志
```

> 关键点
> **确认动作不在 Tab 里，而是在 Tab 之上**
> 因为这是“阶段确认”，不是“内容编辑”。

---

## 二、ContextHeader（保留，轻量）

```text
Component: ContextHeader
├─ BackButton
├─ Icon: LogicalView
├─ Text: 逻辑视图名称
├─ Tag: 当前语义阶段（语义建模进行中）
└─ SecondaryAction: 返回列表
```

> 不放确认按钮
> 防止“确认理解”被误解为普通操作

---

## 三、SemanticStageBar（确认理解的唯一入口）

> **这是本次设计的关键组件**

---

### 3.1 SemanticStageBar · 结构

```text
Component: SemanticStageBar
├─ StageIndicator
├─ StageDescription
└─ PrimaryCTA
```

---

### 3.2 StageIndicator（阶段指示）

```text
StageIndicator
├─ Step: 字段语义理解   [✔ 已完成]
├─ Step: 业务对象识别   [✔ 已生成]
└─ Step: 确认语义理解   [● 当前]
```

> 设计建议

* 横向 Stepper
* 当前步骤高亮
* 明确这是一个“阶段流程”

---

### 3.3 StageDescription（阶段说明）

```text
StageDescription
Text:
字段语义理解与候选业务对象已生成。
请确认当前语义理解结果，确认后将进入业务对象建模阶段。
```

---

### 3.4 PrimaryCTA（唯一主操作）

```text
PrimaryCTA
Button: 确认语义理解结果
```

#### CTA 交互约束（必须给研发）

```text
- 页面仅允许一个 Primary CTA
- CTA 点击前必须满足：
  - 核心字段已确认
  - 至少识别出一个候选业务对象
  - 无阻断性 Gate
```

---

## 四、BusinessObjectUnderstanding（确认对象）

> **这是用户“确认的内容本体”**

```text
Frame: BusinessObjectUnderstanding
├─ SectionHeader
├─ ObjectCardList
└─ HintText
```

---

### 4.1 SectionHeader

```text
SectionHeader
├─ Title: 业务对象理解结果
└─ Tag: 系统识别（待确认）
```

---

### 4.2 ObjectCard（候选对象卡片）

```text
Component: ObjectCard
├─ ObjectHeader
├─ ObjectMeta
├─ AttributeList
└─ ObjectConfidence
```

#### ObjectHeader

```text
ObjectHeader
├─ Text: 候选业务对象名称
├─ Tag: 主体 / 过程 / 状态
└─ Badge: 系统识别
```

---

#### AttributeList（对象属性）

```text
AttributeList
├─ AttributeItem (repeat)
│   ├─ AttributeName
│   ├─ AttributeRole
│   └─ FieldMapping
```

##### FieldMapping（属性 ← 字段）

```text
FieldMapping
Text:
来源字段：
- dept_id
- dept_name
```

> 这一块是**“确认是否合理”的核心证据**

---

### 4.3 ObjectConfidence

```text
ObjectConfidence
├─ Text: 对象置信度 0.82
└─ Hint: 基于字段角色与数据特征综合计算
```

---

### 4.4 HintText（确认语义范围说明）

```text
HintText
Text:
当前确认仅锁定语义理解结果，
业务对象与属性的最终调整将在对象建模阶段完成。
```

> 非常重要
> **防止用户以为“这里就是最终对象裁决”**

---

## 五、ViewTabs（只读校验视角）

### 设计原则

* Tabs **不影响确认动作**
* Tabs 仅用于：

  * 再次核对字段
  * 再次查看关系
  * 再次查看质量 / 安全

```text
Component: ViewTabs
├─ Tab: 字段结构（只读）
├─ Tab: 对象关系（只读）
├─ Tab: 质量概览
├─ Tab: 安全合规
└─ Tab: 日志
```

---

## 六、确认后的页面变化（状态切换）

### 点击「确认语义理解结果」后

#### 6.1 系统行为（必须一致）

```text
- 冻结字段语义结果
- 冻结候选业务对象结构
- 状态流转：
  语义建模进行中 → 可进入对象建模
```

---

#### 6.2 页面即时变化

```text
SemanticStageBar:
- Stepper 高亮移动到「可进入对象建模」
- PrimaryCTA 文案变为：
  [ 进入对象建模 ]
```

---

#### 6.3 ObjectCard 状态变化

```text
Tag:
系统识别（待确认）
→
系统识别（已确认）
```

---

## 七、为什么“确认理解态”一定要这样设计

### 从用户角度

* 我在**确认我看到的东西**
* 我不是在“跳流程”

### 从工程角度

* 没有新页面
* 没有状态割裂
* 状态机非常清晰

### 从产品演进角度

* 后续可以加：

  * 回退
  * 二次确认
  * 多人审核

---

## 八、可以直接给设计 / 大模型的一句话任务

> 在逻辑视图详情页中，增加一个“语义理解确认态”，通过阶段指示条明确当前处于语义确认阶段，并在用户完整查看候选业务对象与字段关系后，提供“确认语义理解结果”的唯一主操作，确认后进入业务对象建模阶段。

---

