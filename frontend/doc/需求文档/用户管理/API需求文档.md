# ç”¨æˆ·ç®¡ç†æ¨¡å— API éœ€æ±‚æ–‡æ¡£

## ğŸ“‹ æ–‡æ¡£ä¿¡æ¯

- **æ¨¡å—åç§°**: ç”¨æˆ·ç®¡ç† (User Management)
- **æ‰€å±ç³»ç»Ÿ**: æ•°æ®è¯­ä¹‰æ²»ç†å¹³å° - å¹³å°ç®¡ç†
- **æ–‡æ¡£ç‰ˆæœ¬**: v1.0
- **åˆ›å»ºæ—¥æœŸ**: 2026-01-21
- **API åŸºç¡€è·¯å¾„**: `/api/v1/user-management`

---

## 1. ä¸šåŠ¡æ¦‚è¿°ä¸æ ¸å¿ƒé€»è¾‘

### 1.1 åŠŸèƒ½å®šä½

ç”¨æˆ·ç®¡ç†æ¨¡å—æ˜¯å¹³å°çš„æ ¸å¿ƒåŸºç¡€æ¨¡å—ï¼Œè´Ÿè´£ç®¡ç†å¹³å°ç”¨æˆ·çš„å…¨ç”Ÿå‘½å‘¨æœŸï¼ŒåŒ…æ‹¬ç”¨æˆ·åˆ›å»ºã€æƒé™åˆ†é…ã€çŠ¶æ€ç®¡ç†ã€ç»„ç»‡å…³è”ç­‰ã€‚è¯¥æ¨¡å—åŒºåˆ«äºç®€å•çš„è®¤è¯æ¨¡å—ï¼Œæ ¸å¿ƒåœ¨äº**æ²»ç†åœºæ™¯ä¸‹çš„ç”¨æˆ·ä¸ç»„ç»‡ã€è§’è‰²ã€æƒé™çš„å¤æ‚ç»‘å®šå…³ç³»**ã€‚

### 1.2 æ ¸å¿ƒæ¦‚å¿µ

**é‡è¦**: æœ¬æ¨¡å—é‡‡ç”¨**èŒè´£ä¸æƒé™åˆ†ç¦»**çš„è®¾è®¡ç†å¿µ:

| æ¦‚å¿µ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| **å²—ä½èŒè´£ (Position)** | ç”¨æˆ·åœ¨æŸä¸ªç»„ç»‡å†…çš„ä¸šåŠ¡è§’è‰²/èŒè´£èº«ä»½ | "è¯­ä¹‰æ²»ç†è´Ÿè´£äºº"ã€"ç‰ˆæœ¬å§”å‘˜ä¼šæˆå‘˜"ã€"æ•°æ®è´¨é‡ç®¡ç†å‘˜" |
| **æƒé™è§’è‰² (Permission Role)** | RBAC æƒé™è§’è‰²ï¼Œå†³å®šç³»ç»Ÿæ“ä½œæƒé™ | "å¹³å°ç®¡ç†å‘˜"ã€"å®¡æ‰¹äºº"ã€"ç¼–è¾‘è€…"ã€"åªè¯»ç”¨æˆ·" |
| **è§’è‰²ç»‘å®š (Role Binding)** | å°†ç”¨æˆ·å…³è”åˆ°ç»„ç»‡+å²—ä½+æƒé™çš„ä¸‰å…ƒç»„ | ç”¨æˆ·åœ¨"è¯­ä¹‰è¿è¥éƒ¨"æ‹…ä»»"è´Ÿè´£äºº"ï¼Œæ‹¥æœ‰"ç¼–è¾‘è€…"æƒé™ |

### 1.3 ç”¨æˆ·çŠ¶æ€æµè½¬

```
æœªæ¿€æ´» â†’ å¯ç”¨ â‡„ åœç”¨
          â†“
        é”å®š â†’ (è§£é”) â†’ å¯ç”¨
          â†“
        å½’æ¡£
```

çŠ¶æ€è¯´æ˜:
- **æœªæ¿€æ´»**: æ–°åˆ›å»ºæˆ–é‚€è¯·çš„ç”¨æˆ·ï¼Œæœªå®Œæˆé¦–æ¬¡ç™»å½•
- **å¯ç”¨**: æ­£å¸¸ä½¿ç”¨çŠ¶æ€
- **åœç”¨**: ä¸´æ—¶ç¦ç”¨ï¼Œå¯æ¢å¤
- **é”å®š**: å› å®‰å…¨ç­–ç•¥å†»ç»“ï¼ˆå¦‚å¤šæ¬¡ç™»å½•å¤±è´¥ã€é£é™©è¡Œä¸ºï¼‰ï¼Œéœ€ç®¡ç†å‘˜è§£é”
- **å½’æ¡£**: ç¦»èŒ/æ³¨é”€çŠ¶æ€ï¼Œä»…ç”¨äºå®¡è®¡ç•™å­˜

---

## 2. æ•°æ®æ¨¡å‹

### 2.1 ç”¨æˆ·å®ä½“ (User)

```typescript
{
  id: string;                    // ç”¨æˆ· ID
  name: string;                  // å§“å
  email: string;                 // é‚®ç®± (å”¯ä¸€)
  phone: string;                 // æ‰‹æœºå·
  deptId: string;                // ä¸»éƒ¨é—¨ ID
  roleBindings: RoleBinding[];   // è§’è‰²ç»‘å®šåˆ—è¡¨ (å¤šæ¡)
  status: UserStatus;            // ç”¨æˆ·çŠ¶æ€
  accountSource: 'local' | 'sso'; // è´¦å·æ¥æº
  lastLogin: string;             // æœ€åç™»å½•æ—¶é—´ (ISO 8601)
  createdAt: string;             // åˆ›å»ºæ—¶é—´
  createdBy: string;             // åˆ›å»ºäºº
  updatedAt: string;             // æ›´æ–°æ—¶é—´
  updatedBy: string;             // æ›´æ–°äºº
  lockReason?: string;           // é”å®šåŸå› 
  lockTime?: string;             // é”å®šæ—¶é—´
  lockBy?: string;               // é”å®šæ“ä½œäºº
}
```

### 2.2 è§’è‰²ç»‘å®š (RoleBinding)

```typescript
{
  orgId: string;           // ç»„ç»‡/éƒ¨é—¨ ID
  position?: string;       // å²—ä½èŒè´£ (å¯é€‰)
  permissionRole?: string; // æƒé™è§’è‰² (å¯é€‰)
}
```

### 2.3 ç”¨æˆ·çŠ¶æ€æšä¸¾

```typescript
type UserStatus = 'æœªæ¿€æ´»' | 'å¯ç”¨' | 'åœç”¨' | 'é”å®š' | 'å½’æ¡£';
```

### 2.4 éƒ¨é—¨/ç»„ç»‡ (Department)

```typescript
{
  id: string;
  name: string;
  parentId: string | null;  // çˆ¶éƒ¨é—¨ IDï¼Œnull è¡¨ç¤ºæ ¹éƒ¨é—¨
  order: number;            // æ’åº
  path: string;             // ç»„ç»‡è·¯å¾„ (å¦‚: /root/dept_ops)
}
```

---

## 3. API æ¥å£è®¾è®¡

### 3.1 ç”¨æˆ·åˆ—è¡¨æŸ¥è¯¢

**æ¥å£**: `GET /api/v1/user-management/users`

**åŠŸèƒ½**: åˆ†é¡µæŸ¥è¯¢ç”¨æˆ·åˆ—è¡¨ï¼Œæ”¯æŒå¤šç»´åº¦ç­›é€‰ã€æ’åº

**è¯·æ±‚å‚æ•°**:

```typescript
{
  page: number;           // é¡µç ï¼Œä» 1 å¼€å§‹
  pageSize: number;       // æ¯é¡µæ•°é‡ï¼Œå»ºè®® 10-100
  keyword?: string;       // å…³é”®è¯æœç´¢ (å§“å/é‚®ç®±/æ‰‹æœºå·)
  deptId?: string;        // æŒ‰éƒ¨é—¨ç­›é€‰
  status?: UserStatus;    // æŒ‰çŠ¶æ€ç­›é€‰
  accountSource?: 'local' | 'sso';  // æŒ‰è´¦å·æ¥æºç­›é€‰
  permissionRole?: string; // æŒ‰æƒé™è§’è‰²ç­›é€‰
  sortField?: 'name' | 'createdAt' | 'lastLogin'; // æ’åºå­—æ®µ
  sortOrder?: 'asc' | 'desc';  // æ’åºæ–¹å‘
}
```

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    total: number;
    page: number;
    pageSize: number;
    users: User[];
  }
}
```

**ä¸šåŠ¡è§„åˆ™**:
- é»˜è®¤æŒ‰åˆ›å»ºæ—¶é—´å€’åº
- å…³é”®è¯æœç´¢æ”¯æŒæ¨¡ç³ŠåŒ¹é…
- `deptId` ç­›é€‰æ—¶ï¼Œåº”è¿”å›è¯¥éƒ¨é—¨åŠå…¶æ‰€æœ‰å­éƒ¨é—¨çš„ç”¨æˆ·

---

### 3.2 ç”¨æˆ·è¯¦æƒ…æŸ¥è¯¢

**æ¥å£**: `GET /api/v1/user-management/users/:id`

**åŠŸèƒ½**: è·å–ç”¨æˆ·å®Œæ•´ä¿¡æ¯ï¼ŒåŒ…æ‹¬è§’è‰²ç»‘å®šã€å®¡è®¡æ—¥å¿—ç­‰

**è·¯å¾„å‚æ•°**:
- `id`: ç”¨æˆ· ID

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    user: User;
    auditLogs: AuditLog[];  // å®¡è®¡æ—¥å¿— (ç”¨æˆ·å˜æ›´è®°å½•)
    impacts?: {             // å½±å“é¢åˆ†æ (å¯é€‰)
      asOwner: number;      // ä½œä¸º Owner çš„å¯¹è±¡æ•°é‡
      asApprover: number;   // ä½œä¸ºå®¡æ‰¹äººçš„æµç¨‹æ•°é‡
    }
  }
}
```

**å®¡è®¡æ—¥å¿—æ ¼å¼**:

```typescript
{
  id: string;
  action: string;        // æ“ä½œç±»å‹: "åˆ›å»º"ã€"æ›´æ–°"ã€"é”å®š"ã€"è§£é”"ç­‰
  operator: string;      // æ“ä½œäººå§“å
  operatorId: string;    // æ“ä½œäºº ID
  timestamp: string;     // æ“ä½œæ—¶é—´
  changes: {             // å˜æ›´å†…å®¹
    field: string;
    oldValue: any;
    newValue: any;
  }[];
}
```

---

### 3.3 åˆ›å»ºç”¨æˆ·

**æ¥å£**: `POST /api/v1/user-management/users`

**åŠŸèƒ½**: åˆ›å»ºæ–°ç”¨æˆ·ï¼Œæ”¯æŒé‚€è¯·æœºåˆ¶

**è¯·æ±‚ä½“**:

```typescript
{
  name: string;                    // å¿…å¡«
  email: string;                   // å¿…å¡«ï¼Œå”¯ä¸€
  phone: string;                   // å¿…å¡«
  deptId: string;                  // ä¸»éƒ¨é—¨ IDï¼Œå¿…å¡«
  roleBindings: RoleBinding[];     // è§’è‰²ç»‘å®šï¼Œå¯ä¸ºç©ºæ•°ç»„
  accountSource: 'local' | 'sso';  // è´¦å·æ¥æºï¼Œå¿…å¡«
  sendInvitation?: boolean;        // æ˜¯å¦å‘é€é‚€è¯·é‚®ä»¶ (é»˜è®¤ true)
  initialPassword?: string;        // åˆå§‹å¯†ç  (ä»… local æ¨¡å¼ï¼Œå¯é€‰)
}
```

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    userId: string;
    initialPassword?: string;  // è‹¥æœªæä¾›ï¼Œåˆ™è¿”å›ç³»ç»Ÿç”Ÿæˆçš„ä¸´æ—¶å¯†ç 
  }
}
```

**ä¸šåŠ¡è§„åˆ™**:
1. é‚®ç®±ã€æ‰‹æœºå·å¿…é¡»å”¯ä¸€
2. æ–°ç”¨æˆ·é»˜è®¤çŠ¶æ€ä¸º `æœªæ¿€æ´»`
3. `accountSource = 'local'` æ—¶:
   - è‹¥æœªæä¾› `initialPassword`ï¼Œç³»ç»Ÿç”Ÿæˆ 8 ä½éšæœºå¯†ç 
   - ç”¨æˆ·é¦–æ¬¡ç™»å½•å¿…é¡»ä¿®æ”¹å¯†ç 
4. `accountSource = 'sso'` æ—¶ï¼Œå¿½ç•¥ `initialPassword` å‚æ•°
5. è‹¥ `sendInvitation = true`ï¼Œå‘é€é‚€è¯·é‚®ä»¶åˆ°ç”¨æˆ·é‚®ç®±

**æ ¡éªŒè§„åˆ™**:
- `email`: ç¬¦åˆé‚®ç®±æ ¼å¼
- `phone`: 11ä½æ•°å­— (ä¸­å›½å¤§é™†æ‰‹æœºå·)
- `name`: 2-50 ä¸ªå­—ç¬¦

---

### 3.4 æ›´æ–°ç”¨æˆ·ä¿¡æ¯

**æ¥å£**: `PUT /api/v1/user-management/users/:id`

**åŠŸèƒ½**: æ›´æ–°ç”¨æˆ·åŸºæœ¬ä¿¡æ¯å’Œè§’è‰²ç»‘å®š

**è·¯å¾„å‚æ•°**: `id` - ç”¨æˆ· ID

**è¯·æ±‚ä½“**:

```typescript
{
  name?: string;
  phone?: string;
  deptId?: string;
  roleBindings?: RoleBinding[];
}
```

**å“åº”**: æ ‡å‡†æˆåŠŸå“åº”

**ä¸šåŠ¡è§„åˆ™**:
1. `email` ä¸å…è®¸ä¿®æ”¹ (è‹¥éœ€ä¿®æ”¹ï¼Œéœ€èµ°è´¦å·è¿ç§»æµç¨‹)
2. æ›´æ–°æ“ä½œè®°å½•å®¡è®¡æ—¥å¿—
3. ä¸å¯ä¿®æ”¹è‡ªå·±çš„æƒé™è§’è‰² (é˜²æ­¢æƒé™æå‡)

---

### 3.5 æ‰¹é‡æ›´æ–°ç”¨æˆ·çŠ¶æ€

**æ¥å£**: `POST /api/v1/user-management/users/batch-status`

**åŠŸèƒ½**: æ‰¹é‡å¯ç”¨/åœç”¨/é”å®šç”¨æˆ·

**è¯·æ±‚ä½“**:

```typescript
{
  userIds: string[];         // ç”¨æˆ· ID åˆ—è¡¨
  status: UserStatus;        // ç›®æ ‡çŠ¶æ€
  reason?: string;           // æ“ä½œåŸå›  (é”å®šæ—¶å¿…å¡«)
}
```

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    successCount: number;
    failedCount: number;
    errors: {
      userId: string;
      reason: string;
    }[];
  }
}
```

**ä¸šåŠ¡è§„åˆ™**:
1. `status = 'é”å®š'` æ—¶ï¼Œ`reason` å¿…å¡«
2. ä¸å¯å¯¹è‡ªå·±æ‰§è¡ŒçŠ¶æ€å˜æ›´
3. åœç”¨/é”å®šå‰ï¼Œæ£€æŸ¥ç”¨æˆ·æ˜¯å¦ä¸ºå…³é”®è´£ä»»äºº (Owner/Approver)ï¼Œè‹¥æ˜¯åˆ™è¿”å›å½±å“é¢è­¦å‘Š

---

### 3.6 è§£é”ç”¨æˆ·

**æ¥å£**: `POST /api/v1/user-management/users/:id/unlock`

**åŠŸèƒ½**: è§£é”è¢«é”å®šçš„ç”¨æˆ·ï¼ŒçŠ¶æ€å˜ä¸º `å¯ç”¨`

**è·¯å¾„å‚æ•°**: `id` - ç”¨æˆ· ID

**è¯·æ±‚ä½“**:

```typescript
{
  reason?: string;  // è§£é”åŸå›  (å¯é€‰)
}
```

**å“åº”**: æ ‡å‡†æˆåŠŸå“åº”

**ä¸šåŠ¡è§„åˆ™**:
1. ä»…é”å®šçŠ¶æ€çš„ç”¨æˆ·å¯è§£é”
2. è®°å½•è§£é”æ“ä½œæ—¥å¿—

---

### 3.7 åˆ é™¤ç”¨æˆ·

**æ¥å£**: `DELETE /api/v1/user-management/users/:id`

**åŠŸèƒ½**: åˆ é™¤ç”¨æˆ· (å»ºè®®è½¯åˆ é™¤ï¼Œå®é™…å˜æ›´ä¸º `å½’æ¡£` çŠ¶æ€)

**è·¯å¾„å‚æ•°**: `id` - ç”¨æˆ· ID

**è¯·æ±‚ä½“**:

```typescript
{
  transferTo?: string;  // è‹¥ç”¨æˆ·æœ‰æ²»ç†å¯¹è±¡ï¼Œè½¬äº¤ç»™æ­¤ç”¨æˆ· ID
  force?: boolean;      // å¼ºåˆ¶åˆ é™¤ (å¿½ç•¥å½±å“é¢æ£€æŸ¥ï¼Œè°¨æ…ä½¿ç”¨)
}
```

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    archived: boolean;
    impactsTransferred: boolean;
  }
}
```

**ä¸šåŠ¡è§„åˆ™**:
1. åˆ é™¤å‰æ£€æŸ¥å½±å“é¢ (Owner/Approver å¯¹è±¡)
2. è‹¥æœ‰å½±å“ä¸”æœªæä¾› `transferTo`ï¼Œæ‹’ç»åˆ é™¤å¹¶è¿”å›å½±å“æ¸…å•
3. ä¸å¯åˆ é™¤è‡ªå·±
4. å»ºè®®å®ç°è½¯åˆ é™¤ (çŠ¶æ€å˜æ›´ä¸º `å½’æ¡£`)

---

### 3.8 é‡ç½®ç”¨æˆ·å¯†ç 

**æ¥å£**: `POST /api/v1/user-management/users/:id/reset-password`

**åŠŸèƒ½**: ç®¡ç†å‘˜é‡ç½®ç”¨æˆ·å¯†ç  (ä»… local è´¦å·)

**è·¯å¾„å‚æ•°**: `id` - ç”¨æˆ· ID

**è¯·æ±‚ä½“**:

```typescript
{
  newPassword?: string;  // æ–°å¯†ç  (å¯é€‰ï¼Œä¸æä¾›åˆ™ç”Ÿæˆéšæœºå¯†ç )
  sendEmail?: boolean;   // æ˜¯å¦å‘é€é‚®ä»¶é€šçŸ¥ (é»˜è®¤ true)
}
```

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    temporaryPassword: string;
  }
}
```

**ä¸šåŠ¡è§„åˆ™**:
1. ä»…æ”¯æŒ `accountSource = 'local'` çš„ç”¨æˆ·
2. æ–°å¯†ç å¿…é¡»åœ¨é¦–æ¬¡ç™»å½•æ—¶ä¿®æ”¹
3. è®°å½•å¯†ç é‡ç½®æ—¥å¿—

---

### 3.9 æ‰¹é‡å¯¼å…¥ç”¨æˆ·

**æ¥å£**: `POST /api/v1/user-management/users/batch-import`

**åŠŸèƒ½**: ä» Excel/CSV æ‰¹é‡å¯¼å…¥ç”¨æˆ·

**è¯·æ±‚**: `multipart/form-data`

```typescript
{
  file: File;           // Excel/CSV æ–‡ä»¶
  dryRun?: boolean;     // æ˜¯å¦ä»…æ ¡éªŒ (é»˜è®¤ false)
}
```

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    totalRows: number;
    successCount: number;
    failedCount: number;
    errors: {
      row: number;
      field: string;
      reason: string;
    }[];
    userIds: string[];  // æˆåŠŸå¯¼å…¥çš„ç”¨æˆ· ID
  }
}
```

**ä¸šåŠ¡è§„åˆ™**:
1. æ”¯æŒ Excel (.xlsx) å’Œ CSV æ ¼å¼
2. å¿…å¡«åˆ—: å§“åã€é‚®ç®±ã€æ‰‹æœºå·ã€éƒ¨é—¨
3. é‚®ç®±/æ‰‹æœºå·é‡å¤æ—¶è·³è¿‡è¯¥è¡Œå¹¶è®°å½•é”™è¯¯
4. `dryRun = true` æ—¶ä»…æ ¡éªŒï¼Œä¸å®é™…å†™å…¥

**æ–‡ä»¶æ¨¡æ¿**: æä¾›ä¸‹è½½æ¥å£ `GET /api/v1/user-management/users/import-template`

---

### 3.10 å¯¼å‡ºç”¨æˆ·æ•°æ®

**æ¥å£**: `GET /api/v1/user-management/users/export`

**åŠŸèƒ½**: å¯¼å‡ºç¬¦åˆæ¡ä»¶çš„ç”¨æˆ·æ•°æ®ä¸º Excel

**è¯·æ±‚å‚æ•°**: (åŒåˆ—è¡¨æŸ¥è¯¢æ¥å£ï¼Œä¸å«åˆ†é¡µ)

```typescript
{
  keyword?: string;
  deptId?: string;
  status?: UserStatus;
  accountSource?: 'local' | 'sso';
  permissionRole?: string;
}
```

**å“åº”**: Excel æ–‡ä»¶æµ (Content-Type: `application/vnd.openxmlformats-officedocument.spreadsheetml.sheet`)

**ä¸šåŠ¡è§„åˆ™**:
1. å¯¼å‡ºåˆ—: å§“åã€é‚®ç®±ã€æ‰‹æœºå·ã€éƒ¨é—¨ã€å²—ä½èŒè´£ã€æƒé™è§’è‰²ã€çŠ¶æ€ã€æœ€åç™»å½•æ—¶é—´
2. å•æ¬¡å¯¼å‡ºä¸Šé™ 10,000 æ¡ (è‹¥è¶…è¿‡ï¼Œå»ºè®®æ”¹ç”¨å¼‚æ­¥å¯¼å‡º)

---

### 3.11 è·å–ç»Ÿè®¡æ•°æ® (KPI)

**æ¥å£**: `GET /api/v1/user-management/statistics`

**åŠŸèƒ½**: è·å–ç”¨æˆ·ç®¡ç† KPI æŒ‡æ ‡

**å“åº”**:

```typescript
{
  code: number;
  message: string;
  data: {
    total: number;              // æ€»ç”¨æˆ·æ•°
    active: number;             // å¯ç”¨çŠ¶æ€ç”¨æˆ·æ•°
    locked: number;             // é”å®šç”¨æˆ·æ•°
    inactive: number;           // æœªæ¿€æ´»ç”¨æˆ·æ•°
    noOrgBinding: number;       // æ— ç»„ç»‡å½’å±ç”¨æˆ·æ•°
    noPermissionRole: number;   // æ— æƒé™è§’è‰²ç”¨æˆ·æ•°
    recentActiveRate: number;   // è¿‘7å¤©æ´»è·ƒç‡ (%)
  }
}
```

---

## 4. æƒé™æ§åˆ¶

### 4.1 æ¥å£æƒé™çŸ©é˜µ

| æ¥å£ | å¹³å°ç®¡ç†å‘˜ | å®¡æ‰¹äºº | ç¼–è¾‘è€… | åªè¯»ç”¨æˆ· |
|------|-----------|-------|-------|---------|
| æŸ¥è¯¢åˆ—è¡¨ | âœ“ | âœ“ | âœ“ | âœ“ |
| æŸ¥è¯¢è¯¦æƒ… | âœ“ | âœ“ | âœ“ | âœ“ |
| åˆ›å»ºç”¨æˆ· | âœ“ | âœ— | âœ— | âœ— |
| æ›´æ–°ç”¨æˆ· | âœ“ | âœ— | âœ— | âœ— |
| æ‰¹é‡æ›´æ–°çŠ¶æ€ | âœ“ | âœ— | âœ— | âœ— |
| è§£é”ç”¨æˆ· | âœ“ | âœ— | âœ— | âœ— |
| åˆ é™¤ç”¨æˆ· | âœ“ | âœ— | âœ— | âœ— |
| é‡ç½®å¯†ç  | âœ“ | âœ— | âœ— | âœ— |
| æ‰¹é‡å¯¼å…¥ | âœ“ | âœ— | âœ— | âœ— |
| å¯¼å‡ºæ•°æ® | âœ“ | âœ“ | âœ— | âœ— |
| ç»Ÿè®¡æ•°æ® | âœ“ | âœ“ | âœ“ | âœ“ |

### 4.2 ç‰¹æ®Šè§„åˆ™

1. **ä¸å¯è‡ªæˆ‘æ“ä½œ**:
   - ä¸å¯ä¿®æ”¹è‡ªå·±çš„æƒé™è§’è‰²
   - ä¸å¯é”å®š/åœç”¨/åˆ é™¤è‡ªå·±
2. **ç»„ç»‡æƒé™è¾¹ç•Œ**:
   - éå¹³å°ç®¡ç†å‘˜åªèƒ½ç®¡ç†æ‰€å±ç»„ç»‡å†…çš„ç”¨æˆ·

---

## 5. é”™è¯¯ç å®šä¹‰

| é”™è¯¯ç  | è¯´æ˜ |
|-------|------|
| 400 | è¯·æ±‚å‚æ•°æ ¡éªŒå¤±è´¥ |
| 401 | æœªç™»å½•/Token å¤±æ•ˆ |
| 403 | æ— æƒé™æ“ä½œ |
| 404 | ç”¨æˆ·ä¸å­˜åœ¨ |
| 409 | é‚®ç®±/æ‰‹æœºå·å·²å­˜åœ¨ |
| 422 | ä¸šåŠ¡é€»è¾‘é”™è¯¯ (å¦‚: åˆ é™¤å…³é”®è´£ä»»äºº) |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ |

**ä¸šåŠ¡é”™è¯¯ç¤ºä¾‹**:

```json
{
  "code": 422,
  "message": "æ— æ³•åœç”¨è¯¥ç”¨æˆ·",
  "data": {
    "reason": "è¯¥ç”¨æˆ·æ˜¯3ä¸ªä¸šåŠ¡å¯¹è±¡çš„Ownerï¼Œè¯·å…ˆè½¬äº¤è´£ä»»",
    "impacts": [
      { "type": "BusinessObject", "id": "BO_001", "name": "å®¢æˆ·è®¢å•" },
      { "type": "BusinessObject", "id": "BO_002", "name": "äº§å“ä¸»æ•°æ®" }
    ]
  }
}
```

---

## 6. å…¶ä»–æŠ€æœ¯è¦æ±‚

### 6.1 æ€§èƒ½è¦æ±‚

- åˆ—è¡¨æŸ¥è¯¢æ¥å£å“åº”æ—¶é—´ < 500ms (1000 æ¡æ•°æ®å†…)
- æ‰¹é‡æ“ä½œæ”¯æŒæœ€å¤š 100 æ¡è®°å½•
- å¯¼å‡ºåŠŸèƒ½æ”¯æŒæœ€å¤š 10,000 æ¡æ•°æ®

### 6.2 å®‰å…¨è¦æ±‚

1. **æ•æ„Ÿæ•°æ®è„±æ•**: å¯¼å‡ºæ—¶éƒ¨åˆ†éšè—æ‰‹æœºå· (å¦‚: `138****1234`)
2. **å®¡è®¡æ—¥å¿—**: æ‰€æœ‰å†™æ“ä½œå¿…é¡»è®°å½•å®¡è®¡æ—¥å¿—
3. **å¯†ç å®‰å…¨**: 
   - å¯†ç å¿…é¡»åŠ å¯†å­˜å‚¨ (bcrypt)
   - ä¸´æ—¶å¯†ç æœ‰æ•ˆæœŸ 24 å°æ—¶
4. **é˜²é‡æ”¾**: æ‰¹é‡å¯¼å…¥éœ€è¦é˜²æ­¢é‡å¤æäº¤

### 6.3 æ•°æ®ä¸€è‡´æ€§

1. åˆ é™¤ç”¨æˆ·æ—¶ï¼Œçº§è”æ›´æ–°ç›¸å…³è¡¨ (å¦‚å®¡æ‰¹æµèŠ‚ç‚¹)
2. æ›´æ–°éƒ¨é—¨æ—¶ï¼ŒåŒæ­¥æ›´æ–°ç”¨æˆ·çš„ç»„ç»‡è·¯å¾„ç¼“å­˜å­—æ®µ

---

## 7. å¾…è®¨è®ºäº‹é¡¹

1. **SSO é›†æˆ**: æ˜¯å¦æ”¯æŒ LDAP/OAuth åŒæ­¥ç”¨æˆ·ï¼ŸåŒæ­¥é¢‘ç‡ï¼Ÿ
2. **å®¡æ‰¹æµ**: åˆ›å»ºç”¨æˆ·æ˜¯å¦éœ€è¦å®¡æ‰¹ï¼Ÿ
3. **é€šçŸ¥æœºåˆ¶**: ç”¨æˆ·çŠ¶æ€å˜æ›´æ˜¯å¦éœ€è¦é‚®ä»¶/ç«™å†…ä¿¡é€šçŸ¥ï¼Ÿ
4. **æ•°æ®ä¿ç•™**: å½’æ¡£ç”¨æˆ·çš„æ•°æ®ä¿ç•™ç­–ç•¥ï¼Ÿå¤šä¹…åå½»åº•åˆ é™¤ï¼Ÿ

---

## 8. é™„å½•

### 8.1 å²—ä½èŒè´£é¢„è®¾å€¼

```
è¯­ä¹‰æ²»ç†è´Ÿè´£äºº
ç‰ˆæœ¬å§”å‘˜ä¼šæˆå‘˜
å®‰å…¨å®¡è®¡
æ•°æ®è´¨é‡ç®¡ç†å‘˜
æ•°æ®æœåŠ¡è¿è¥
ä¸šåŠ¡åˆ†æå¸ˆ
```

### 8.2 æƒé™è§’è‰²é¢„è®¾å€¼

```
å¹³å°ç®¡ç†å‘˜
å®¡æ‰¹äºº
ç¼–è¾‘è€…
åªè¯»ç”¨æˆ·
```

### 8.3 å‚è€ƒæ–‡æ¡£

- å‰ç«¯éœ€æ±‚æ–‡æ¡£: `doc/éœ€æ±‚æ–‡æ¡£/ç”¨æˆ·ç®¡ç†/0120ä¼˜åŒ–.md`
- å‰ç«¯å®ç°: `src/views/UserManagementView.tsx`
- è®¤è¯æ¨¡å— API: `services/app/system-service/api/doc/user/auth.api`
